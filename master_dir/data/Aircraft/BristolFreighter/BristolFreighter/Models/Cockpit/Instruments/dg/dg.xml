<?xml version="1.0"?>

<PropertyList>

  <path>dg.ac</path>
  
  <animation>
    <name>aiScale</name>
    <type>scale</type>
    <object-name>Circle</object-name>
    <object-name>rose</object-name>
    <object-name>knob</object-name>
    <object-name>knob.001</object-name>
    <object-name>rose.001</object-name>
    <object-name>click_l</object-name>
    <object-name>click_r</object-name>
    <x-offset>1.2</x-offset>
    <y-offset>1.2</y-offset>
    <z-offset>1.2</z-offset>
  </animation> 


  <animation>
    <type>material</type>
    <object-name>rose</object-name>
    <object-name>rose.001</object-name>
    <emission>
      <red>1.0</red>
      <green>0.6</green>
      <blue>0.3</blue>
      <factor-prop>sim/model//material/instruments/factor</factor-prop>
    </emission>
  </animation>

  <animation>
    <type>material</type>
    <object-name>knob</object-name>
    <object-name>rose.001</object-name>
    <emission>
      <red>0.03</red>
      <green>0.03</green>
      <blue>0.02</blue>
      <factor-prop>systems/electrical/outputs/cabin-lights</factor-prop>
    </emission>
  </animation>

  <animation>
    <type>noshadow</type>
    <object-name>click_l</object-name>
    <object-name>click_r</object-name>
  </animation>

  <animation>
    <type>select</type>
    <object-name>knob</object-name>
    <object-name>rose</object-name>
    <condition>
      <not>
        <property>instrumentation/heading-indicator/caged</property>
      </not>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>knob.001</object-name>
    <object-name>rose.001</object-name>
    <condition>
        <property>instrumentation/heading-indicator/caged</property>
    </condition>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>knob</object-name>
    <visible>true</visible>
    <action>
      <button>0</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-assign</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <property>instrumentation/heading-indicator/offset-deg</property>
      </binding>
      <binding>
        <command>property-assign</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <property>instrumentation/heading-indicator/indicated-heading-deg</property>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>instrumentation/heading-indicator/caged</property>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>sim/sound/switch</property>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>knob.001</object-name>
    <visible>true</visible>
    <action>
      <button>0</button>
      <repeatable>false</repeatable>
      <binding>
        <command>nasal</command>
        <script>
          var path = props.globals.getNode("instrumentation/heading-indicator", 1);
          var offset = path.getNode("offset-deg", 1);
          var heading = path.getNode("indicated-heading-deg", 1).getValue();
          var c_heading = path.getNode("caged-heading-deg", 1).getValue();

          var new_offset = offset.getValue() + c_heading - heading;
          offset.setValue(new_offset);
        </script>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>instrumentation/heading-indicator/caged</property>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>sim/sound/switch</property>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_l</object-name>
    <visible>true</visible>
    <action>
      <button>0</button>
      <repeatable>true</repeatable>
      <interval-sec>0.1</interval-sec>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>1</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>1</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_l</object-name>
    <visible>true</visible>
    <action>
      <button>1</button>
      <repeatable>true</repeatable>
      <interval-sec>0.1</interval-sec>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>5</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>5</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_r</object-name>
    <visible>true</visible>
    <action>
      <button>0</button>
      <repeatable>true</repeatable>
      <interval-sec>0.1</interval-sec>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>-1</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>-1</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_r</object-name>
    <visible>true</visible>
    <action>
      <button>1</button>
      <repeatable>true</repeatable>
      <interval-sec>0.1</interval-sec>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>-5</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>-5</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>knob.001</object-name>
    <visible>true</visible>
    <action>
      <button>3</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>1</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>1</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>knob.001</object-name>
    <visible>true</visible>
    <action>
      <button>4</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>-1</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>-1</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_l</object-name>
    <object-name>click_r</object-name>
    <visible>true</visible>
    <action>
      <button>3</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>5</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>5</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>click_l</object-name>
    <object-name>click_r</object-name>
    <visible>true</visible>
    <action>
      <button>4</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-offset-deg</property>
        <step>-5</step>
      </binding>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/heading-indicator/caged-heading-deg</property>
        <step>-5</step>
        <min>0</min>
        <max>360</max>
        <wrap>true</wrap>
      </binding>
    </action>
  </animation>

  <animation>
    <type>rotate</type>
    <object-name>rose</object-name>
    <property>instrumentation/heading-indicator/indicated-heading-deg</property>
    <center>
      <x-m>-0.054</x-m>
      <y-m>0.0</y-m>
      <z-m>0.0</z-m>
    </center>
    <axis>
      <x>0.0</x>
      <y>0.0</y>
      <z>1.0</z>
    </axis>
  </animation>

  <animation>
    <type>rotate</type>
    <object-name>rose.001</object-name>
    <property>instrumentation/heading-indicator/caged-heading-deg</property>
    <center>
      <x-m>-0.054</x-m>
      <y-m>0.0</y-m>
      <z-m>0.0</z-m>
    </center>
    <axis>
      <x>0.0</x>
      <y>0.0</y>
      <z>1.0</z>
    </axis>
  </animation>

<!-- *** LoD *** -->
  <animation> 
    <type>range</type>
    <min-m>0</min-m>
    <max-m>30</max-m>
  </animation>

</PropertyList>
